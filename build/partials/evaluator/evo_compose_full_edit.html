<ng-include src="'partials/side_bar.html'"></ng-include>
<ng-include src="'partials/evaluator/evo_header_bar.html'"></ng-include>
<ng-include src="'partials/evaluator/evo_navbar.html'"></ng-include>
<div class="case-2 case-3" style="padding-left:2rem" ng-controller="mainCtrl">
  <div class="page-content">
    <div class="period-header">
      <h5 class="main-title">{{current_period}}</h5>
      <span class="sub-title color-bright-blue" ng-click="show_team('#ee_info')" style="cursor:pointer">Information</span>
      <div class="row" id="ee_info" style="display:none">
        <div class="col-2">
          <ul style="color:grey;list-style-type:none">
            <li>Department</li>
            <li>Devision</li>
            <li>Team</li>
            <li>Position</li>
            <li>Job level</li>
          </ul>
        </div>
        <div class="col-3">
          <ul style="list-style-type:none">
            <li>{{users[eveId].department}}</li>
            <li>{{users[eveId].department}}</li>
            <li>{{users[eveId].team}}</li>
            <li>{{users[eveId].job_title}}</li>
            <li>{{users[eveId].position}}</li>
          </ul>
        </div>
      </div>
      <div class="period-status">
        <span>Status:</span>
        <span>Composing</span>
      </div>
    </div>
    <!-- <div class="bg-light-blue"> -->
    <div class="">
      <div class="container-fluid">
        <div class="row" style="padding-bottom:4rem">
          <div class="col-md-12">
            <div class="page-body">
              <div class="objectives">
                <div class="widget-title" style="font-size:20px;padding-bottom:22px;">Objective list
                  <span class="icon-plus compose-icon" ng-click="add_obj_group()"></span>
                  <span class="icon-docs compose-icon" ng-click="clone_sub_objs($event,'#clone-modal')"></span>
                  <a class="btn btn-primary not_a " style="float:right" href="#/evaluator/detail/{{eveId}}" ng-show="total_weight == 100">visible to Evaluatee</a>
                  <button class="btn btn_ask out_line not_a " style="float:right; margin-right:1rem;font-size:13.5px">save edit</button>
                </div>
                <div class="widget-content-item display-table bg-light-blue" style="margin-bottom:10px;">
                  <div class="display-table-cell">
                    <div class="widget-content-item-title compose-header">Objectives ({{objs.length}})</div>
                  </div>
                  <div class="display-table-cell">
                    <div class="widget-content-item-title compose-header text-center">ETA</div>
                  </div>
                  <div class="display-table-cell">
                    <div class="widget-content-item-title compose-header text-center">Weight
                      <span ng-show="total_weight > 0">({{total_weight}})</span>
                    </div>
                  </div>
                  <div class="display-table-cell">
                    <div class="widget-content-item-title compose-header text-center">Action</div>
                  </div>
                </div>
                <div class="widget" ng-repeat="obj in objs | filter: 'Senior'" id="obj{{$index}}">
                  <div class="widget-big-title" style="padding-left:15px; font-weight: 600">
                    <span class="icon-arrow-down compose-icon" style="font-size:12px; margin-right:10px" ng-click="show_team('#sub_objs' + $index)"></span>
                    <input style="display:inline-block;width:40%;font-weight:600" ng-value="obj.objective"/>
                    <span class="icon-plus compose-icon" ng-click="new_blank_sub_obj($index)"></span>
                  </div>
                  <div id="sub_objs{{$index}}">
                    <div class="widget-content" style="margin-left:30px;" ng-repeat="sub_obj in sub_objs | filter : obj.objective | filter : 'Senior'" id="sub_objs_item{{$index}}">
                      <div class="widget-content-item display-table">
                        <div class="display-table-cell">
                          <div class="widget-content-item-content">
                            <textarea class="text-input full-width" style="border:0" rows="2" id="sub_objs{{$parent.$index}}{{$index}}">{{sub_obj.sub_objectives}}</textarea>
                          </div>
                        </div>
                        <div class="display-table-cell">
                          <div class="widget-content-item-content text-center" style="position:relative;top:-30px">
                            <input type="date" name="" value="{{sub_obj.eta}}" class="datepicker">
                          </div>
                        </div>
                        <div class="display-table-cell">
                          <div class="widget-content-item-content" style="position:relative;top:-30px">
                            <input class="input" type="number" name="" ng-model="sub_obj.weight" ng-change="calculate_weight()">
                          </div>
                        </div>
                        <div class="display-table-cell">
                          <div class="widget-content-item-content text-center" style="position:relative;top:-30px">
                            <span class="icon-layers compose-icon-right" ng-click="clone_sub_objs($event,'#presets-modal','#sub_objs' + $parent.$index + $index)">
                              <p>Presets</p>
                            </span>
                            <span class="icon-docs compose-icon-right" ng-click="clone_sub_objs($event,'#clone-modal')">
                              <p>Clone</p>
                            </span>
                            <span class="icon-trash compose-icon-right" ng-click="remove_sub_obj('#sub_objs_item' + $index)">
                              <p>Delete</p>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="clone-modal">
          <div class="clone-title">
            Select user to clone
          </div>
          <div class="clone-item" ng-repeat="user in users">
            <div class="clone-title"></div>
            <input type="checkbox" class="compose-checkbox">{{user.full_name}}
          </div>
          <button type="button" name="button" class="btn btn-primary" style="margin-top:20px;float:right">CLONE</button>
        </div>
        <div id="presets-modal">
          <div class="preset-item" ng-repeat="sub_obj in ref_sub_objs">
            <input type="radio" name="selected_sub_objs" class="compose-checkbox" value="{{sub_obj.sub_objectives}}">{{sub_obj.sub_objectives}}
          </div>
          <button type="button" ng-click="use_preset()" class="btn btn-primary" style="margin-top:20px;float:right">add</button>
        </div>
      </div>
    </div>
    <div class="footer-toast bg-grey on" ng-if="total_weight != 100">
      <div class="row ">
        <div class="col-sm-8 d-flex align-items-center ">
          <div class="footer-toast-content color-warm-grey ">
            <span style="color: var(--danger);font-size:16px">Your total weight is not 100%, please review weigth on each objective</span>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="footer-toast bg-white on "> <div class="row "> <div class="col-sm-8 d-flex align-items-center "> <div class="footer-toast-content "> <span>Click “Save” to save your composing. If you wish to finish composing, click “Finish”
    button.</span> </div> </div> <div class="col-sm-4 d-flex align-items-center text-align-right btn-inline-group "> <a class="btn btn-ask not_a " style="color:var(--azul) " href="#/evaluator/detail/{{eveId}} ">FINISH</a><a class="btn btn-submit not_a "
    style="color:white ">Save</a> </div> </div> </div> -->
  </div>
</div>
